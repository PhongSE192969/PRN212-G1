<Window x:Class="MilkTea.GUI.Views.CheckoutWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Thanh toÃ¡n - MilkTea POS"
        Height="850" Width="600"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5"
        ResizeMode="NoResize">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" 
                Background="#FF6B35" 
                CornerRadius="5" 
                Padding="15" 
                Margin="0,0,0,20">
            <TextBlock Text="ðŸ’³ Thanh ToÃ¡n" 
                       FontSize="24" 
                       FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Center"/>
        </Border>

        <!-- Cart Items -->
        <Border Grid.Row="1" 
                Background="White" 
                CornerRadius="5" 
                Padding="10"
                Margin="0,0,0,15">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.1"/>
            </Border.Effect>
            
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="itemsCart">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#EEEEEE" 
                                    BorderThickness="0,0,0,1" 
                                    Padding="10,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{Binding ProductName, Mode=OneWay}" 
                                                   FontWeight="SemiBold" 
                                                   FontSize="14"/>
                                        <TextBlock Text="{Binding ToppingName, Mode=OneWay}" 
                                                   FontSize="12" 
                                                   Foreground="Gray" 
                                                   Margin="0,2,0,0"/>
                                        <TextBlock FontSize="12" Foreground="Gray">
                                            <Run Text="SL: "/>
                                            <Run Text="{Binding Quantity, Mode=OneWay}"/>
                                            <Run Text=" x "/>
                                            <Run Text="{Binding UnitPrice, Mode=OneWay, StringFormat={}{0:N0}}"/>
                                            <Run Text=" Ä‘"/>
                                        </TextBlock>
                                    </StackPanel>
                                    
                                    <TextBlock Grid.Column="1" 
                                               Text="{Binding Subtotal, Mode=OneWay, StringFormat={}{0:N0} Ä‘}" 
                                               FontWeight="Bold" 
                                               FontSize="14"
                                               Foreground="#FF6B35"
                                               VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        <!-- Discount Panel -->
        <Border Grid.Row="2" 
                Background="White" 
                CornerRadius="5" 
                Padding="15" 
                Margin="0,0,0,15">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.1"/>
            </Border.Effect>
            
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="10"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBox x:Name="txtDiscountCode" 
                             Grid.Column="0"
                             Height="40" 
                             Padding="10"
                             FontSize="14"
                             BorderBrush="#DDDDDD"
                             BorderThickness="1"
                             VerticalContentAlignment="Center"
                             Margin="0,0,10,0"/>
                    
                    <Button Grid.Column="1" 
                            Content="Ãp dá»¥ng" 
                            Click="BtnApplyDiscount_Click"
                            Width="100" 
                            Height="40"
                            Background="#4CAF50"
                            Foreground="White"
                            BorderThickness="0"
                            FontSize="14"
                            Cursor="Hand"/>
                </Grid>

                <TextBlock x:Name="txtDiscountStatus" 
                           Grid.Row="2"
                           Text="ChÆ°a Ã¡p dá»¥ng mÃ£ giáº£m giÃ¡"
                           FontSize="12"
                           Foreground="Gray"
                           HorizontalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Totals Summary -->
        <Border Grid.Row="3" 
                Background="White" 
                CornerRadius="5" 
                Padding="15" 
                Margin="0,0,0,15">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.1"/>
            </Border.Effect>
            
            <StackPanel>
                <Grid Margin="0,5">
                    <TextBlock Text="Tá»•ng tiá»n hÃ ng:" FontSize="14"/>
                    <TextBlock x:Name="txtSubtotal" Text="0 Ä‘" FontSize="14" HorizontalAlignment="Right"/>
                </Grid>
                
                <Grid Margin="0,5">
                    <TextBlock Text="VAT (10%):" FontSize="14"/>
                    <TextBlock x:Name="txtVAT" Text="0 Ä‘" FontSize="14" HorizontalAlignment="Right"/>
                </Grid>
                
                <Grid Margin="0,5">
                    <TextBlock Text="Giáº£m giÃ¡:" FontSize="14" Foreground="#4CAF50"/>
                    <TextBlock x:Name="txtDiscount" Text="0 Ä‘" FontSize="14" Foreground="#4CAF50" HorizontalAlignment="Right"/>
                </Grid>
                
                <Separator Margin="0,10"/>
                
                <Grid Margin="0,10,0,0">
                    <TextBlock Text="Tá»”NG THANH TOÃN:" FontSize="16" FontWeight="Bold"/>
                    <TextBlock x:Name="txtTotal" Text="0 Ä‘" FontSize="20" FontWeight="Bold" Foreground="#FF6B35" HorizontalAlignment="Right"/>
                </Grid>
            </StackPanel>
        </Border>

        <!-- Payment Buttons -->
        <Grid Grid.Row="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" 
                    Content="ðŸ’µ Tiá»n máº·t" 
                    Click="BtnCash_Click"
                    Height="50"
                    Background="#4CAF50"
                    Foreground="White"
                    BorderThickness="0"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Cursor="Hand"/>

            <Button Grid.Column="2" 
                    Content="ðŸ“± Chuyá»ƒn khoáº£n" 
                    Click="BtnTransfer_Click"
                    Height="50"
                    Background="#2196F3"
                    Foreground="White"
                    BorderThickness="0"
                    FontSize="16"
                    FontWeight="SemiBold"
                    Cursor="Hand"/>
        </Grid>
    </Grid>
</Window>
